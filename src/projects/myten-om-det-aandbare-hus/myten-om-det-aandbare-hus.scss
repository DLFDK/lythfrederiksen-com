@use "sass:math";
@use "global/_variables/general.scss" as *;
@use "global/_variables/fonts.scss" as *;
@use "global/_variables/colors.scss" as *;
@use "projects/projects-project.scss";

.graph {
    position: relative;
    margin: 0;
    display: grid;
    grid-template-columns: 0 1fr;
    grid-template-areas:
        "y-label graph"
        ". x-label"
        "caption caption";
    color: $stripe-dark-blue;
    font-size: $font-size-small;
    line-height: $line-height-small;
    letter-spacing: $letter-spacing-copy;
    @media (max-width: $breakpoint-small) {
        font-size: $font-size-smaller;
    }

    &__axis-labels {
        fill: rgba($color: $stripe-dark-blue, $alpha: 0.7);
    }
    &__data-label {
        fill: rgba($color: $stripe-dark-blue, $alpha: 0.8);

        &--secondary {
            fill: rgba($color: $stripe-dark-blue, $alpha: 0.6);
        }
    }
    &__vertical-lines {
        stroke: $stripe-light-grey;
    }
    &__data-line {
        stroke: var(--color-primary);

        &--secondary {
            stroke: $stripe-light-grey;
        }

        &--lower {
            stroke: $stripe-blue;
        }
    }
    &__data-points {
        fill: var(--color-primary);

        &--secondary {
            fill: $stripe-light-grey;
        }

        &--lower {
            fill: $stripe-blue;
        }

        &--special {
            fill: $stripe-cloud-blue;
        }
    }

    &__y-label > p,
    &__x-label > p {
        color: rgba($color: $stripe-dark-blue, $alpha: 0.8);
        @media (max-width: $breakpoint-medium) {
            font-size: $font-size-smaller;
        }
    }

    &__y-label {
        grid-area: y-label;
        position: absolute;
        top: 50%;
        transform: translateX(-55%) rotate(-90deg);
        width: max-content;
    }
    &__x-label {
        grid-area: x-label;
        justify-self: center;
    }

    & svg {
        grid-area: graph;
        margin-bottom: -20px;

        @media (max-width: $breakpoint-medium) {
            margin-bottom: -10px;
        }
    }

    & figcaption {
        grid-area: caption;
        text-align: center;
        font-style: italic;
        padding-top: 8px;
        @media (max-width: $breakpoint-small) {
            padding-top: 0px;
        }
    }
}

.highlight {
    position: relative;
    &::before {
        position: absolute;
        content: "";
        border-left: 1px solid var(--color-primary, $stripe-purple);
        left: -16px;
        height: 100%;
        transform: scaleY(math.div($font-size-regular, $line-height-small));
    }

    & > p {
        color: $stripe-cloud-blue;
        font-size: $font-size-smaller;
        font-weight: $font-weight-regular;
        line-height: $line-height-regular;
        letter-spacing: $letter-spacing-copy;
        text-transform: uppercase;
        font-style: italic;
        padding-bottom: 8px;
        position: relative;

        &::before {
            position: absolute;
            content: "";
            border-left: 1px solid var(--color-primary, $stripe-purple);
            left: -16px;
            height: 100%;
            transform: scaleY(math.div($font-size-regular, $line-height-small));
        }
    }

    & ul {
        padding: 0;
        list-style: none;
        display: flex;
        flex-direction: column;
        gap: 24px;
    }

    & li {
        position: relative;
        color: $stripe-cloud-blue;
        font-size: $font-size-small;
        font-weight: $font-weight-bold;
        line-height: $line-height-regular;
        letter-spacing: $letter-spacing-copy;
        font-style: italic;
    }
}
